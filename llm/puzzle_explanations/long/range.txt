You have a grid of squares; some squares contain numbers. Your job is to colour some of the squares black, such that several criteria are satisfied:

    no square with a number is coloured black.
    no two black squares are adjacent (horizontally or vertically).
    for any two white squares, there is a path between them using only white squares.
    for each square with a number, that number denotes the total number of white squares reachable from that square going in a straight line in any horizontal or vertical direction until hitting a wall or a black square; the square with the number is included in the total (once).

For instance, a square containing the number one must have four black squares as its neighbours by the last criterion; but then it's impossible for it to be connected to any outside white square, which violates the second to last criterion. So no square will contain the number one.

Credit for this puzzle goes to Nikoli, who have variously called it ‘Kurodoko’, ‘Kuromasu’ or ‘Where is Black Cells’. [18].

Range was contributed to this collection by Jonas Kölker.

[18] https://www.nikoli.co.jp/en/puzzles/kurodoko/

Click with the left button to paint a square black, or with the right button to mark a square with a dot to indicate that you are sure it should not be painted black. Repeated clicking with either button will cycle the square through the three possible states (filled, dotted or empty) in opposite directions.

You can also use the cursor keys to move around the grid squares. Pressing Return does the same as clicking with the left button, while pressing Space does the same as a right button click. Moving with the cursor keys while holding Shift will place dots in all squares that are moved through.